<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>test</title>
    </head>
    <body>
        <div id="waiter">
            <img src="base4253/img/waiter.png">
        </div>
        <button onclick="move(1,0)">move1</button>
        <button onclick="move(0,0)">move0</button>
        <script>
            //总结：如果构造函数有return值，那么构造函数里的变量不能用this.来定义，用var来定义的话可以在构造函数的函数中取到，也可以在return的函数中取到。但注意直接饮用，不要用this.
            //构造函数里的函数，可以在return中取到，但是不能由实例直接取
            //我的理解是，构造函数中的return的意义，类似于把构造函数里其他东西隐藏起来，变成私有的，只有从return中的变量和函数是公有的，可以调用私有的变量和函数，可以由实例直接调用
            var test=function(){
                this.t0=0;//这种写法怎么都取不到，如果直接用t0会报错，如果用this.t0不报错但取不到
                //对任何构造函数（不管有没有return），var定义的属性都是私有的
                var t1=1;//这种直接取取不到,可以从函数中用t1取到,用this.t1也取不到
                function t2(){
                    return 2;
                    //return t1;//取的到
                    //return this.t1;//取不到
                    //return t0;//报错undefined
                    //return this.t0;//取不到
                }
                return{
                    t3:t1,//这个值是取不到的，会报错t是undefined//这里如果用this.t1也取不到
                    t4:t2(),
                    t5: function(){
                        return 3;
                    },
                    t6: function(){
                        return t1;//取的到
                        //return this.t1;//取不到
                    },
                    t7: function(){
                        return t2();//取的到
                    },
                    t8: function(){
                        //return t0;//报错undefined
                        return this.t0;//不报错，取不到
                    },
                }
            }
            // var test0=new test();
            // console.log(test0.t0);//这个值是取不到，会返回undefined
            // console.log(test0.t1);//这个值是取不到，会返回undefined
            // //console.log(test0.t2);//这样是undefined
            // //console.log(test0.t2());//这里居然报错说不是function
            // //console.log(test0().t3);//这个写法是错的，test0是对象不是函数
            // console.log(test0.t3);//取的到
            // console.log(test0.t4);
            // console.log(test0.t5());
            // console.log(test0.t6());//取的到
            // console.log(test0.t7());//取的到
            // console.log(test0.t8());//取不到



            function move(h,w){
                //var ind=parseInt(this.id[1]);
                var waiterimg=document.getElementById("waiter").getElementsByTagName("img")[0];
                //d=1表示去向上移动找厨师,此时w代表chef的id，d=-1表示向下移动找顾客，此时w代表座位号seat
                if(h==1){
                    //waiterimg.style.marginTop="0px";
                    //waiterimg.style.marginLeft=(100*ind).toString() + "px";
                    //可以，但是有时候有问题
                    var up = setInterval(() => {
                        console.log("up..");
                        var mtop=getComputedStyle(waiterimg,null)['margin-top'];
                        var nowtop=parseInt(mtop.substring(0,mtop.length-2));
                        if(nowtop<=5){
                            clearInterval(up);
                            waiterimg.style.marginTop="0px";
                            return;
                        }

                        waiterimg.style.marginTop=nowtop-7.5+"px";
                    }, 100);
                }
                else{
                    //waiterimg.style.marginTop="75px";
                    //var left = w * table;            
                    //可以，但是有时候有问题
                    var down = setInterval(() => {
                        var mtop=getComputedStyle(waiterimg,null)['margin-top'];
                        var nowtop=parseInt(mtop.substring(0,mtop.length-2));
                        //var mleft=getComputedStyle(waiterimg,null)['margin-left'];
                        //var nowleft=parseInt(mleft.substring(0,mleft.length-2));
                        if(nowtop>=70){
                            clearInterval(down);
                            waiterimg.style.marginTop="75px";
                            return;
                        }

                        //waiterimg.style.marginLeft=mleft+left/10+"px";
                        waiterimg.style.marginTop=nowtop+7.5+"px";
                    }, 100);
                }
            }
            
        </script>
    </body>
</html>
